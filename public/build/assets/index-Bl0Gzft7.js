import{_ as y,o as x,j as k,k as r,y as _,E as $,f as m,x as w,t as C}from"./index-DfMvNUKY.js";import{a as A}from"./app-sqDDY9TO.js";const M={name:"current_month_and_last_month_devided_weeks",props:["currentMonth","lastMonth","id","title"],data(){return{option:{series:[],chart:{type:"bar",height:300,toolbar:{show:!1}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},colors:["rgb(132, 90, 223)","#e4e7ed"],plotOptions:{bar:{colors:{ranges:[{from:-100,to:-46,color:"#ebeff5"},{from:-45,to:0,color:"#ebeff5"}]},columnWidth:"60%",borderRadius:5}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:void 0},legend:{show:!1,position:"top"},yaxis:{title:{style:{color:"#adb5be",fontSize:"13px",fontFamily:"poppins, sans-serif",fontWeight:600,cssClass:"apexcharts-yaxis-label"}},labels:{formatter:function(a){return a.toFixed(0)+""}}},xaxis:{type:"week",categories:[this.$t("global.first_week"),this.$t("global.second_week"),this.$t("global.third_week"),this.$t("global.fourth_week"),this.$t("global.fifth_week")],axisBorder:{show:!0,color:"rgba(119, 119, 142, 0.05)",offsetX:0,offsetY:0},axisTicks:{show:!0,borderType:"solid",color:"rgba(119, 119, 142, 0.05)",width:6,offsetX:0,offsetY:0},labels:{rotate:-90}}}}},watch:{currentMonth:{handler(a,h){setTimeout(()=>{let l=["First Week","Second Week","Third Week","Fourth Week","Fifth Week"],d=[],n=[];l.forEach(g=>{let u=0;this.currentMonth.forEach(c=>{c.week==g&&(u=1,d.push(c.number))}),u==0&&d.push(0),u=0,this.lastMonth.forEach(c=>{c.week==g&&(u=1,n.push(c.number))}),u==0&&n.push(0)}),this.option.series=[{data:d,name:this.$t("global.current_month")},{data:n,name:this.$t("global.last_month")}],document.getElementById(this.id).innerHTML="";var b=new ApexCharts(document.querySelector("#"+this.id),this.option);b.render()},500)}}}},S={class:"col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},E={class:"card custom-card"},F={class:"card-header justify-content-between"},I={class:"card-title"},D={class:"card-body py-0 ps-0"},T=["id"];function W(a,h,l,d,n,b){return x(),k("div",S,[r("div",E,[r("div",F,[r("div",I,_(l.title),1)]),r("div",D,[r("div",{id:l.id},null,8,T)])])])}const B=y(M,[["render",W]]),P={props:["total_amount_for_each_month_in_year","total_count_for_each_month_in_year"],data(){return{options:{series:[],chart:{height:380,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1,style:{fontSize:"20px",fontWeight:"bold",colors:["#1421b9"]}},colors:["#1421b9","#FF1654"],stroke:{curve:"straight"},title:{align:"left"},yaxis:[{axisTicks:{show:!0},axisBorder:{show:!0,color:"#1421b9"},labels:{style:{colors:"#1421b9"}},title:{text:this.$t("global.amount"),style:{color:"#1421b9"}}},{opposite:!0,axisTicks:{show:!0},axisBorder:{show:!0,color:"#FF1654"},labels:{style:{colors:"#FF1654"}},title:{text:this.$t("global.number_of_bookings"),style:{color:"#FF1654"}}}],grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:[]}}}},watch:{total_amount_for_each_month_in_year:{handler(a,h){setTimeout(()=>{[this.$t("global.january"),this.$t("global.february"),this.$t("global.march"),this.$t("global.april"),this.$t("global.may"),this.$t("global.june"),this.$t("global.july"),this.$t("global.august"),this.$t("global.september"),this.$t("global.october"),this.$t("global.november"),this.$t("global.december")].forEach(u=>{this.options.xaxis.categories.push(u)});let d=["January","February","March","April","May","June","July","August","September","October","November","December"],n=[],b=[];d.forEach(u=>{let c=0;this.total_amount_for_each_month_in_year.forEach(p=>{p.month.trim()==u&&(c=1,n.push(p.total_amount+" "+this.$t("global.sar")))}),c==0&&n.push(0),c=0,this.total_count_for_each_month_in_year.forEach(p=>{p.month.trim()==u&&(c=1,b.push(p.total_count))}),c==0&&b.push(0),c=0}),this.options.series=[{name:this.$t("global.amount"),data:n},{name:this.$t("global.number_of_bookings"),data:b}],document.getElementById("total-amount-for-each-month-in-the-year").innerHTML="";var g=new ApexCharts(document.querySelector("#total-amount-for-each-month-in-the-year"),this.options);g.render()},500)}}}},z={class:"col-xl-12"},L={class:"card custom-card"},R={class:"card-header"},j={class:"card-title"};function q(a,h,l,d,n,b){return x(),k("div",z,[r("div",L,[r("div",R,[r("div",j,_(a.$t("global.total_revenue_and_count_of_bookings_for_each_month_in_the_year")),1)]),h[0]||(h[0]=r("div",{class:"card-body"},[r("div",{id:"total-amount-for-each-month-in-the-year"})],-1))])])}const O=y(P,[["render",q]]),J={props:["peak_periods"],data(){return{options:{series:[],chart:{height:380,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1,style:{fontSize:"20px",fontWeight:"bold",colors:["#000"]}},colors:["#000"],stroke:{curve:"straight"},title:{align:"left"},yaxis:[{axisTicks:{show:!0},axisBorder:{show:!0,color:"#000"},labels:{style:{colors:"#000"}},title:{text:this.$t("global.number_of_bookings"),style:{color:"#000"}}}],grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:[]}}}},watch:{peak_periods:{handler(a,h){setTimeout(()=>{let l=[];this.peak_periods.forEach(n=>{this.options.xaxis.categories.push(n.period),l.push(n.count)}),this.options.series=[{name:this.$t("global.number_of_bookings"),data:l}],document.getElementById("peak-periods").innerHTML="";var d=new ApexCharts(document.querySelector("#peak-periods"),this.options);d.render()},500)}}}},N={class:"col-xl-12"},V={class:"card custom-card"},H={class:"card-header"},Y={class:"card-title"};function U(a,h,l,d,n,b){return x(),k("div",N,[r("div",V,[r("div",H,[r("div",Y,_(a.$t("global.peak_periods")),1)]),h[0]||(h[0]=r("div",{class:"card-body"},[r("div",{id:"peak-periods"})],-1))])])}const X=y(J,[["render",U]]),G={components:{CurrentMonthAndLastMonthDevidedWeeks:B,ChartForTotalAmountAndCountOfEachMonthInYear:O,ChartForPeakPeriods:X},setup(){const{t:a}=$({}),h=m(""),l=m(!1),d=m(""),n=m([]);let b=(i=1)=>{l.value=!0,A.get("dashboard/statistics").then(o=>{let t=o.data.data;d.value=t,v(t.clientActiveCount,t.clientDeActiveCount),p(t.driverActiveCount,t.driverDeActiveCount),c(t.invoiceStatisticsMonth);let e=[];e.push(t.pending_booking),e.push(t.processing_booking),e.push(t.started_booking),e.push(t.completed_booking),e.push(t.canceled_booking),n.value=e,g();let s=[];s.push(t.pending_next_booking),s.push(t.processing_next_booking),s.push(t.started_next_booking),s.push(t.completed_next_booking),s.push(t.canceled_next_booking),u(s)}).catch(o=>{l.value=!1}).finally(()=>{l.value=!1})};w(()=>{C.get("tokenAdmin")&&(h.value=JSON.parse(localStorage.getItem("user")).name),b()});let g=()=>{Chart.defaults.elements.arc.borderWidth=0,Chart.defaults.datasets.doughnut.cutout="85%",new Chart(document.getElementById("leads-source"),{type:"doughnut",data:{datasets:[{label:"My First Dataset",data:n.value||"",backgroundColor:["rgb(245, 184, 73)","rgb(132, 90, 223)","rgb(73, 182, 245)","rgb(38, 191, 148)","rgb(230, 83, 60)"]}]},plugins:[{afterUpdate:function(i){i.getDatasetMeta(0).data.forEach(function(t){t.round={x:(i.chartArea.left+i.chartArea.right)/2,y:(i.chartArea.top+i.chartArea.bottom)/2,radius:(t.outerRadius+t.innerRadius)/2,thickness:(t.outerRadius-t.innerRadius)/2,backgroundColor:t.options.backgroundColor}})},afterDraw:i=>{const{ctx:o,canvas:t}=i;i.getDatasetMeta(0).data.forEach(e=>{Math.PI/2-e.startAngle;const s=Math.PI/2-e.endAngle;o.save(),o.translate(e.round.x,e.round.y),o.fillStyle=e.options.backgroundColor,o.beginPath(),o.arc(e.round.radius*Math.sin(s),e.round.radius*Math.cos(s),e.round.thickness,0,2*Math.PI),o.closePath(),o.fill(),o.restore()})}}]})},u=(i=[])=>{Chart.defaults.elements.arc.borderWidth=0,Chart.defaults.datasets.doughnut.cutout="85%",new Chart(document.getElementById("next-booking-source"),{type:"doughnut",data:{datasets:[{label:"My First Dataset",data:i,backgroundColor:["rgb(245, 184, 73)","rgb(132, 90, 223)","rgb(73, 182, 245)","rgb(38, 191, 148)","rgb(230, 83, 60)"]}]},plugins:[{afterUpdate:function(o){o.getDatasetMeta(0).data.forEach(function(e){e.round={x:(o.chartArea.left+o.chartArea.right)/2,y:(o.chartArea.top+o.chartArea.bottom)/2,radius:(e.outerRadius+e.innerRadius)/2,thickness:(e.outerRadius-e.innerRadius)/2,backgroundColor:e.options.backgroundColor}})},afterDraw:o=>{const{ctx:t,canvas:e}=o;o.getDatasetMeta(0).data.forEach(s=>{Math.PI/2-s.startAngle;const f=Math.PI/2-s.endAngle;t.save(),t.translate(s.round.x,s.round.y),t.fillStyle=s.options.backgroundColor,t.beginPath(),t.arc(s.round.radius*Math.sin(f),s.round.radius*Math.cos(f),s.round.thickness,0,2*Math.PI),t.closePath(),t.fill(),t.restore()})}}]})},c=(i=[])=>{let o=[],t=[];i.forEach(function(f){o.push(f.total_amount),t.push(f.day)});var e={series:[{name:a("global.amount"),data:o}],chart:{type:"area",height:320,zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"straight"},subtitle:{text:a("global.paymentMoves"),align:"left"},grid:{borderColor:"#f2f5f7"},labels:t,title:{text:a("global.AnalysisOfBillCollectionsDuringTheMonth"),align:"left",style:{fontSize:"13px",fontWeight:"bold",color:"#8c9097"}},colors:["#845adf"],xaxis:{type:"datetime",labels:{show:!0,style:{colors:"#8c9097",fontSize:"11px",fontWeight:600,cssClass:"apexcharts-xaxis-label"}}},yaxis:{opposite:!0,labels:{show:!0,style:{colors:"#8c9097",fontSize:"11px",fontWeight:600,cssClass:"apexcharts-xaxis-label"}}},legend:{horizontalAlign:"left"}},s=new ApexCharts(document.querySelector("#area-basic"),e);s.render()},p=(i=0,o=0)=>{var t={series:[i,o],chart:{height:300,type:"pie"},colors:["#26bf94","#e6533c"],labels:[a("global.activated"),a("global.Inactive")],legend:{position:"bottom"},dataLabels:{dropShadow:{enabled:!1}}},e=new ApexCharts(document.querySelector("#driver-statistics"),t);e.render()},v=(i=0,o=0)=>{var t={series:[i,o],chart:{height:300,type:"pie"},colors:["#845adf","#e6533c"],labels:[a("global.activated"),a("global.Inactive")],legend:{position:"bottom"},dataLabels:{dropShadow:{enabled:!1}}},e=new ApexCharts(document.querySelector("#client-statistics"),t);e.render()};return{user_name:h,statistics:d}},data(){return{}},mounted(){}},K={class:"container-fluid"},Q={class:"d-md-flex d-block align-items-center justify-content-between my-4 page-header-breadcrumb"},Z={class:"fw-semibold fs-18 mb-0"};function tt(a,h,l,d,n,b){var g;return x(),k("div",K,[r("div",Q,[r("div",null,[r("p",Z,_(a.$t("global.WelcomeBack"))+", "+_((g=a.$store.state.authAdmin.user)==null?void 0:g.name)+" !",1)])])])}const at=y(G,[["render",tt],["__scopeId","data-v-d0e44cb8"]]);export{at as default};
